<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>로그인</title>
</head>
<body>
  <h1>로그인</h1>
  <input id="userId" placeholder="ID">
  <input id="password" placeholder="비밀번호" type="password">
  <button id="loginBtn">로그인</button>

  <script>
    document.getElementById("loginBtn").addEventListener("click", async () => {
      const userId = document.getElementById("userId").value;
      const password = document.getElementById("password").value;

      const res = await fetch("/login", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ userId, password })
      });

      const data = await res.json();
      if (data.isSuccess) {
        localStorage.setItem("user", JSON.stringify(data.result));
        location.href = "chatRoom.html";
      } else {
        alert("로그인 실패");
      }
    });
  </script>
</body>
</html>